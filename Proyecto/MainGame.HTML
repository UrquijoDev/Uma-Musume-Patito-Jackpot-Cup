<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salva a Mambo - Tracen Arcade</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div id="app">
        <!-- HEADER -->
        <header>
            <div class="header-top">
                <div class="brand">MAMBO'S DEBT</div>
                <div class="wallet">ü•ï <span id="ui-carrots">100</span></div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="ui-progress"></div>
                <div class="progress-text">LIBERTAD: <span id="ui-paid">0</span> / <span id="ui-debt">50000</span></div>
            </div>
        </header>

        <!-- MENU PRINCIPAL -->
        <div id="view-menu" class="menu-grid">
            <!-- 1. Izquierda: Derby Roulette -->
            <div class="menu-card area-roulette" onclick="game.openDifficulty('roulette')">
                <div style="font-size:3rem;">üé∞</div>
                <h3>Derby Roulette</h3>
                <p style="font-size:0.9rem; color:#64748b;">¬°Apuesta al G1!</p>
            </div>

            <!-- 2. Centro: Memory Match -->
            <div class="menu-card area-memory" onclick="game.openDifficulty('memory')">
                <div style="font-size:3rem;">üß†</div>
                <h3>Memory Match</h3>
                <p style="font-size:0.9rem; color:#64748b;">Entrena tu mente.</p>
            </div>

            <!-- 3. Derecha: Carrot Flip -->
            <div class="menu-card area-flip" onclick="game.openDifficulty('flip')">
                <div style="font-size:3rem;">üí£</div>
                <h3>Carrot Flip</h3>
                <p style="font-size:0.9rem; color:#64748b;">Alto riesgo.</p>
            </div>

            <!-- 4. Abajo: Tienda -->
            <div class="menu-card shop-card area-shop" onclick="app.showShop()">
                <div style="font-size:3rem;">üõí</div>
                <div>
                    <h3>Mercado Negro</h3>
                    <p style="font-size:0.9rem; color:#be185d;">Items, Mejoras y Pagos.</p>
                </div>
            </div>
        </div>

        <!-- SELECTOR DE DIFICULTAD/APUESTA -->
        <div id="view-difficulty" class="hidden">
            <div class="diff-modal">
                <h2 style="margin-top:0;">Elige tu Apuesta</h2>
                <p style="font-size:0.9rem; color:#64748b;">Cuanto m√°s apuestes, m√°s dif√≠cil ser√°, pero ganar√°s m√°s.</p>

                <div class="bet-grid" id="diff-options">
                    <!-- JS generar√° opciones -->
                </div>

                <p id="diff-desc" style="font-size:0.8rem; font-style:italic; height:20px; color:#be185d;"></p>

                <div class="flex justify-between" style="margin-top:1.5rem;">
                    <button class="btn" onclick="app.showMenu()"
                        style="background:#e2e8f0; color:#475569; padding:0.5rem 1rem;">Cancelar</button>
                    <button class="btn" onclick="game.confirmStart()" id="btn-start-game" disabled
                        style="background:var(--green-dark); color:white; padding:0.5rem 2rem;">¬°Jugar!</button>
                </div>
            </div>
        </div>

        <!-- TIENDA -->
        <div id="view-shop" class="hidden">
            <div class="shop-container">
                <!-- Imagen de la chica de la tienda (Placeholder) -->
                <img src="assets/img/SpecialweekSTSF.png" class="shop-header-img" alt="Due√±a de la Tienda">

                <div class="shop-grid">
                    <h2 style="text-align:center; color:var(--slate-800); margin:0;">Mercado Negro</h2>
                    <p style="text-align:center; font-size:0.8rem; color:var(--slate-600);">"Todo tiene un precio,
                        cari√±o..."</p>

                    <button class="btn" onclick="app.showMenu()"
                        style="margin: 0 auto 1rem auto; background:#e2e8f0; width: fit-content; padding: 15px 40px; display: block;">
                        Volver al Casino
                    </button>

                    <!-- Items -->
                    <div class="item-row buff">
                        <div style="font-size:2rem;">‚õëÔ∏è</div>
                        <div>
                            <strong>Casco Veloz</strong><br>
                            <span style="font-size:0.8rem; color:#64748b;">x2 Ganancias en Carrot Flip (5 usos)</span>
                        </div>
                        <button class="btn buy-btn" onclick="shop.buy('helmet', 500)">500ü•ï</button>
                    </div>

                    <div class="item-row buff">
                        <div style="font-size:2rem;">üî≠</div>
                        <div>
                            <strong>Binoculares</strong><br>
                            <span style="font-size:0.8rem; color:#64748b;">Revela 3 bombas en Carrot Flip</span>
                        </div>
                        <button class="btn buy-btn" onclick="shop.buy('glasses', 800)">800ü•ï</button>
                    </div>

                    <div class="item-row">
                        <div style="font-size:2rem;">üõ°Ô∏è</div>
                        <div>
                            <strong>Seguro Anti-Quiebra</strong><br>
                            <span style="font-size:0.8rem; color:#64748b;">Te salva si llegas a 0 (1 uso)</span>
                        </div>
                        <button class="btn buy-btn" onclick="shop.buy('insurance', 1000)">1000ü•ï</button>
                    </div>

                    <div class="item-row win">
                        <div style="font-size:2rem;">üìú</div>
                        <div>
                            <strong>Contrato de Mambo</strong><br>
                            <span style="font-size:0.8rem; color:#be185d; font-weight:bold;">¬°LIBERTAD!
                                (Victoria)</span>
                        </div>
                        <button class="btn buy-btn" onclick="shop.payDebt()" id="btn-pay-debt">50000ü•ï</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- JUEGO: CARROT FLIP -->
        <div id="view-game-flip" class="hidden">
            <div class="game-area">
                <div class="flex justify-between items-center mb-2">
                    <button class="btn" style="background:#e2e8f0; font-size:0.8rem; padding:4px 8px;"
                        onclick="game.quit('flip')">Rendirse</button>
                    <div style="font-weight:bold; color:var(--green-dark);">Bote: <span id="flip-pot">0</span>ü•ï</div>
                </div>

                <div id="flip-buff-indicator" class="active-buff hidden">‚õëÔ∏è</div>

                <!-- El tablero Voltorb Flip cl√°sico -->
                <div class="flip-grid" id="flip-board"></div>

                <div class="flex justify-center gap-2" style="margin-top:1rem;">
                    <button class="btn" id="btn-memo" onclick="flipGame.toggleMemo()"
                        style="background:#f1f5f9; padding:8px;">‚úèÔ∏è Apuntes</button>
                    <button class="btn" id="btn-cashout" onclick="flipGame.cashOut()"
                        style="background:var(--pink-primary); color:white; padding:8px 20px;">Cobrar</button>
                </div>
                <p id="flip-msg" style="text-align:center; font-size:0.8rem; margin-top:0.5rem; color:#be185d;">
                    Encuentra 2x y 3x. ¬°Evita las nubes!</p>
            </div>
        </div>

        <!-- JUEGO: MEMORY -->
        <div id="view-game-memory" class="hidden">
            <div class="game-area">
                <div class="flex justify-between items-center mb-2">
                    <button class="btn" style="background:#e2e8f0; font-size:0.8rem; padding:4px 8px;"
                        onclick="game.quit('memory')">Salir</button>
                    <div style="font-weight:bold;">Intentos Restantes: <span id="mem-moves">0</span></div>
                </div>
                <div class="memory-board" id="memory-board"></div>
            </div>
        </div>

        <!-- JUEGO: ROULETTE -->
        <div id="view-game-roulette" class="hidden">
            <div class="game-area" style="text-align:center;">
                <div class="roulette-container">
                    <!-- Imagen de la chica de la Ruleta (Placeholder) -->
                    <img src="assets/img/mamboRuletaSF.png" class="roulette-girl-img" alt="Croupier">

                    <div>
                        <div
                            style="width:200px; height:200px; background:var(--green-dark); border-radius:50%; margin:0 auto 1rem; position:relative; display:flex; align-items:center; justify-content:center; border:8px solid white; box-shadow:0 0 0 4px var(--green-primary);">
                            <div id="wheel-spinner"
                                style="position:absolute; inset:0; border:4px dashed rgba(255,255,255,0.5); border-radius:50%;">
                            </div>
                            <div id="wheel-res"
                                style="background:white; width:60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:900; z-index:10;">
                                G1</div>
                        </div>
                    </div>
                </div>

                <p style="font-size:0.9rem;">Apuesta Total: <span id="roulette-bet-display">0</span></p>
                <div class="flex gap-2 justify-center mb-4">
                    <button class="btn" onclick="rouletteGame.pick('red')"
                        style="background:#ef4444; color:white; padding:10px 20px;">ROJO (x2)</button>
                    <button class="btn" onclick="rouletteGame.pick('black')"
                        style="background:#1e293b; color:white; padding:10px 20px;">NEGRO (x2)</button>
                    <button class="btn" onclick="rouletteGame.pick('green')"
                        style="background:#22c55e; color:white; padding:10px 20px;">VERDE (x14)</button>
                </div>
                <button class="btn" onclick="app.showMenu()"
                    style="background:#e2e8f0; font-size:0.8rem;">Volver</button>
            </div>
        </div>

        <!-- MENSAJES FLOTANTES -->
        <div id="result-overlay" class="hidden result-modal">
            <h2 id="result-title">TITULO</h2>
            <p id="result-msg">Mensaje</p>
            <button class="btn" onclick="document.getElementById('result-overlay').classList.add('hidden')"
                style="background:var(--slate-800); color:white; margin-top:1rem;">Cerrar</button>
        </div>

        <!-- STORY OVERLAY -->
        <div id="story-overlay">
            <div class="story-box">
                <!-- Imagen din√°mica -->
                <img src="" id="story-sprite" class="character-sprite" alt="Mambo">
                <div class="dialogue-box">
                    <div class="speaker-name">Mambo</div>
                    <p id="story-text" style="margin:0; min-height:3em; line-height:1.5;">...</p>
                    <div style="text-align:right; margin-top:1rem;">
                        <button class="btn" onclick="story.next()"
                            style="background:var(--pink-primary); color:white; padding:0.5rem 1.5rem;">Continuar
                            ‚ñº</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- MAMBO CORNER (Asistente) -->
        <div id="host-corner" class="hidden">
            <div class="host-bubble" id="host-bubble">¬°T√∫ puedes!</div>
            <img src="assets/img/mamboIdleSF.png" class="host-img-small" alt="Chibi" onclick="host.randomQuote()">
        </div>

    </div>
    <script src="script.js"></script>
</body>

</html>